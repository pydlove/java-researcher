<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¢¨å¢¨è¯´MySQLå­˜å‚¨æœºåˆ¶</title>
    <script src="https://fastly.jsdelivr.net/npm/dom-to-image-more@2.8.0/dist/dom-to-image-more.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap');

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f0f0f0;
            padding: 20px;
            overflow-x: auto;
            margin: 0;
        }

        .cards-container {
            display: flex;
            gap: 20px;
            padding: 20px 0;
        }

        .card {
            width: 450px; /* ä¸¥æ ¼å›ºå®šå®½åº¦ */
            min-width: 450px; /* é˜²æ­¢å‹ç¼© */
            height: 600px;
            background-color: #FAF7F0;
            padding: 25px;
            box-sizing: border-box;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            flex-shrink: 0; /* é˜²æ­¢å¡ç‰‡ç¼©å° */
        }

        .card::before {
            content: "";
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 30px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><circle cx="15" cy="15" r="5" fill="%23FF6B6B" opacity="0.5"/></svg>');
            background-repeat: repeat-x;
            background-position: center;
            opacity: 0.3;
        }

        .lined-bg {
            background-image: repeating-linear-gradient(to bottom, rgba(224,224,224,0.3), rgba(224,224,224,0.3) 1px, transparent 1px, transparent 24px);
        }

        .title-box {
            border: 2px solid #FF6B6B;
            border-radius: 8px;
            padding: 8px 15px;
            display: inline-block;
            margin-bottom: 15px;
            background-color: rgba(255, 255, 255, 0.7);
        }

        .main-title {
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin: 0;
        }

        .sub-title {
            font-size: 20px;
            font-weight: 500;
            color: #4ECDC4;
            margin: 15px 0 10px;
            border-left: 4px solid #4ECDC4;
            padding-left: 10px;
        }

        .content {
            flex: 1;
            overflow: hidden;
            font-size: 16px;
            line-height: 1.6;
            color: #333;
        }

        .highlight {
            background-color: rgba(255, 223, 0, 0.5);
            padding: 0.1em 0.3em;
            border-radius: 3px;
        }

        .list {
            padding-left: 20px;
        }

        .list li {
            margin-bottom: 8px;
        }

        .icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: #FF6B6B;
            border-radius: 50%;
            color: white;
            text-align: center;
            line-height: 20px;
            font-size: 12px;
            margin-right: 8px;
        }

        .footer {
            text-align: center;
            font-size: 14px;
            color: #888;
            margin-top: 10px;
        }

        .download-btn {
            margin-top: 10px;
            padding: 8px 15px;
            background-color: #FF6B6B;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Noto Sans SC', sans-serif;
        }

        .download-all {
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #4ECDC4;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Noto Sans SC', sans-serif;
            font-weight: 500;
            display: block;
        }

        .card-cover {
            background-color: #E0F7FA;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .cover-icon {
            font-size: 60px;
            color: #FF6B6B;
            margin-bottom: 20px;
        }

        .tag {
            display: inline-block;
            background-color: #4ECDC4;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin: 0 5px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 14px;
        }

        .table th, .table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .table th {
            background-color: rgba(78, 205, 196, 0.2);
        }

        .code {
            font-family: monospace;
            background-color: rgba(0,0,0,0.05);
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 14px;
        }
    </style>
</head>
<body>
<div class="cards-container">
    <!-- å¡ç‰‡1ï¼šå°é¢ -->
    <div class="card card-cover" id="card1">
        <div>
            <div class="cover-icon">ğŸ“Š</div>
            <div class="title-box">
                <h1 class="main-title">MySQLå­˜å‚¨æ­ç§˜</h1>
            </div>
            <p>å†…å­˜ä¸ç¡¬ç›˜çš„å®Œç¾åä½œ</p>
            <div style="margin-top: 20px;">
                <span class="tag">æ•°æ®åº“</span>
                <span class="tag">æ€§èƒ½ä¼˜åŒ–</span>
                <span class="tag">å­˜å‚¨å¼•æ“</span>
            </div>
        </div>
        <div class="footer">å¢¨å¢¨è¯´æŠ€æœ¯ç³»åˆ— Â· ç¬¬15æœŸ</div>
    </div>

    <!-- å¡ç‰‡2ï¼šå­˜å‚¨å±‚æ¬¡ -->
    <div class="card lined-bg" id="card2">
        <div class="title-box">
            <h2 class="main-title">MySQLçš„å­˜å‚¨å±‚æ¬¡</h2>
        </div>
        <div class="content">
            <h3 class="sub-title">1. å†…å­˜ï¼ˆMemory-Basedï¼‰</h3>
            <p><span class="highlight">é«˜é¢‘è®¿é—®æ•°æ®çš„ç¼“å­˜</span>ï¼ŒåŠ é€Ÿè¯»å†™</p>
            <p><strong>æ ¸å¿ƒç»„ä»¶ï¼š</strong></p>
            <ul class="list">
                <li><span class="icon">1</span><strong>InnoDB Buffer Pool</strong>ï¼šç¼“å­˜è¡¨æ•°æ®ã€ç´¢å¼•ï¼ˆé»˜è®¤å ç‰©ç†å†…å­˜çš„50%~75%ï¼‰</li>
                <li><span class="icon">2</span><strong>MyISAM Key Buffer</strong>ï¼šä»…ç¼“å­˜ç´¢å¼•ï¼ˆMyISAMå¼•æ“ï¼‰</li>
                <li><span class="icon">3</span><strong>æŸ¥è¯¢ç¼“å­˜</strong>ï¼šç¼“å­˜å®Œæ•´æŸ¥è¯¢ç»“æœï¼ˆMySQL 8.0å·²ç§»é™¤ï¼‰</li>
            </ul>

            <h3 class="sub-title">2. ç¡¬ç›˜ï¼ˆDisk-Basedï¼‰</h3>
            <p><span class="highlight">æŒä¹…åŒ–å­˜å‚¨æ•°æ®</span>ï¼Œä¿è¯å¯é æ€§</p>
            <p><strong>å­˜å‚¨æ–‡ä»¶ï¼š</strong></p>
            <ul class="list">
                <li><span class="icon">A</span><strong>InnoDB</strong>ï¼š.ibdï¼ˆæ•°æ®+ç´¢å¼•ï¼‰ã€ibdata1ï¼ˆç³»ç»Ÿè¡¨ç©ºé—´ï¼‰</li>
                <li><span class="icon">B</span><strong>MyISAM</strong>ï¼š.MYDï¼ˆæ•°æ®ï¼‰ã€.MYIï¼ˆç´¢å¼•ï¼‰</li>
            </ul>
        </div>
        <div class="footer">å¢¨å¢¨è¯´ Â· æ•°æ®åº“å°çŸ¥è¯†</div>
    </div>

    <!-- å¡ç‰‡3ï¼šç‰¹æ®Šåœºæ™¯ -->
    <div class="card lined-bg" id="card3">
        <div class="title-box">
            <h2 class="main-title">ç‰¹æ®Šåœºæ™¯ï¼šçº¯å†…å­˜å­˜å‚¨</h2>
        </div>
        <div class="content">
            <h3 class="sub-title">1. Memoryå¼•æ“ï¼ˆHEAPè¡¨ï¼‰</h3>
            <p><span class="highlight">ç‰¹ç‚¹ï¼š</span></p>
            <ul class="list">
                <li>æ•°æ®å®Œå…¨å­˜å‚¨åœ¨å†…å­˜ï¼Œé‡å¯åä¸¢å¤±</li>
                <li>é€‚ç”¨äºä¸´æ—¶è¡¨ã€é«˜é€Ÿç¼“å­˜</li>
            </ul>
            <p><span class="highlight">ç¤ºä¾‹ï¼š</span></p>
            <div class="code">CREATE TABLE temp_table (id INT) ENGINE=MEMORY;</div>

            <h3 class="sub-title">2. ç¬¬ä¸‰æ–¹å†…å­˜å¼•æ“</h3>
            <ul class="list">
                <li><strong>Redis</strong>ï¼šé€šè¿‡MySQLæ’ä»¶å°†æ•°æ®æ˜ å°„åˆ°Redis</li>
                <li><strong>Memcached</strong>ï¼šé€šè¿‡InnoDB Memcached Pluginç›´æ¥è®¿é—®å†…å­˜æ•°æ®</li>
            </ul>

            <h3 class="sub-title">3. å†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼ˆRAM Diskï¼‰</h3>
            <ul class="list">
                <li>æ–¹æ³•ï¼šå°†MySQLæ•°æ®ç›®å½•æŒ‚è½½åˆ°/dev/shmæˆ–tmpfs</li>
                <li><span class="highlight">é£é™©</span>ï¼šæœåŠ¡å™¨æ–­ç”µåæ•°æ®å…¨ä¸¢ï¼Œä»…ç”¨äºæµ‹è¯•</li>
            </ul>
        </div>
        <div class="footer">å¢¨å¢¨è¯´ Â· æŠ€æœ¯å¹²è´§</div>
    </div>

    <!-- å¡ç‰‡4ï¼šæŒä¹…åŒ–ä¸æ€§èƒ½æƒè¡¡ -->
    <div class="card lined-bg" id="card4">
        <div class="title-box">
            <h2 class="main-title">æŒä¹…åŒ–ä¸æ€§èƒ½çš„æƒè¡¡</h2>
        </div>
        <div class="content">
            <table class="table">
                <tr>
                    <th>é…ç½®/åœºæ™¯</th>
                    <th>å­˜å‚¨ä»‹è´¨</th>
                    <th>æŒä¹…æ€§</th>
                    <th>é€‚ç”¨åœºæ™¯</th>
                </tr>
                <tr>
                    <td>é»˜è®¤InnoDBé…ç½®</td>
                    <td>å†…å­˜+ç¡¬ç›˜</td>
                    <td>é«˜</td>
                    <td>é€šç”¨ä¸šåŠ¡ï¼ˆå¦‚è®¢å•ã€ç”¨æˆ·ï¼‰</td>
                </tr>
                <tr>
                    <td>innodb_flush_log_at_trx_commit=1</td>
                    <td>ç¡¬ç›˜</td>
                    <td>æœ€é«˜</td>
                    <td>é‡‘èäº¤æ˜“ï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</td>
                </tr>
                <tr>
                    <td>innodb_flush_log_at_trx_commit=2</td>
                    <td>å†…å­˜+ç¡¬ç›˜</td>
                    <td>ä¸­ç­‰</td>
                    <td>é«˜å¹¶å‘å†™å…¥ï¼ˆæ€§èƒ½ä¼˜å…ˆï¼‰</td>
                </tr>
                <tr>
                    <td>Memoryå¼•æ“</td>
                    <td>å†…å­˜</td>
                    <td>æ— </td>
                    <td>ä¸´æ—¶æ•°æ®ã€ä¼šè¯ç¼“å­˜</td>
                </tr>
                <tr>
                    <td>æŒ‚è½½tmpfs</td>
                    <td>å†…å­˜</td>
                    <td>æ— </td>
                    <td>å¼€å‘æµ‹è¯•ç¯å¢ƒ</td>
                </tr>
            </table>

            <h3 class="sub-title">æ··åˆå­˜å‚¨æµç¨‹</h3>
            <p><strong>å†™å…¥æµç¨‹ï¼š</strong></p>
            <p>å†…å­˜(Buffer Pool) â†’ æ—¥å¿—(Redo Log) â†’ ç¡¬ç›˜(æ•°æ®æ–‡ä»¶)</p>
            <p><strong>è¯»å–æµç¨‹ï¼š</strong></p>
            <p>ä¼˜å…ˆä»å†…å­˜è¯»å–ï¼Œæœªå‘½ä¸­æ—¶ä»ç¡¬ç›˜åŠ è½½</p>
        </div>
        <div class="footer">å¢¨å¢¨è¯´ Â· æ•°æ®åº“é…ç½®æŒ‡å—</div>
    </div>

    <!-- å¡ç‰‡5ï¼šä¼˜åŒ–å»ºè®® -->
    <div class="card lined-bg" id="card5">
        <div class="title-box">
            <h2 class="main-title">å¦‚ä½•ä¼˜åŒ–å­˜å‚¨æ€§èƒ½ï¼Ÿ</h2>
        </div>
        <div class="content">
            <h3 class="sub-title">1. å†…å­˜ä¼˜åŒ–</h3>
            <p><span class="icon">â†‘</span><strong>è°ƒå¤§Buffer Poolï¼š</strong></p>
            <div class="code">innodb_buffer_pool_size = 12G  # å»ºè®®ä¸ºç‰©ç†å†…å­˜çš„50%~75%</div>
            <p><span class="icon">âš¡</span><strong>ä½¿ç”¨SSDï¼š</strong>æ›¿æ¢æœºæ¢°ç¡¬ç›˜ï¼Œæå‡éšæœºIOæ€§èƒ½</p>

            <h3 class="sub-title">2. å‡å°‘ç¡¬ç›˜IO</h3>
            <p><span class="icon">â±</span><strong>å»¶è¿Ÿåˆ·ç›˜ï¼š</strong></p>
            <div class="code">
                innodb_flush_log_at_trx_commit = 2  # æ¯ç§’åˆ·ä¸€æ¬¡æ—¥å¿—<br>
                sync_binlog = 0                     # ç¦ç”¨binlogå®æ—¶åˆ·ç›˜
            </div>
            <p><span class="icon">ğŸ—œ</span><strong>å‹ç¼©è¡¨ï¼š</strong></p>
            <div class="code">CREATE TABLE compressed_table (id INT) ROW_FORMAT=COMPRESSED;</div>

            <h3 class="sub-title">3. åˆ†å¸ƒå¼å­˜å‚¨</h3>
            <ul class="list">
                <li><strong>äº‘æ•°æ®åº“</strong>ï¼šå¦‚AWS Auroraï¼Œæ•°æ®å­˜å‚¨åœ¨åˆ†å¸ƒå¼å­˜å‚¨å±‚ï¼Œè‡ªåŠ¨ç¼“å­˜çƒ­ç‚¹æ•°æ®</li>
                <li><strong>å…±äº«å­˜å‚¨</strong>ï¼šé€šè¿‡SAN/NASå®ç°å¤šèŠ‚ç‚¹å…±äº«æ•°æ®</li>
            </ul>
        </div>
        <div class="footer">å¢¨å¢¨è¯´ Â· æ€§èƒ½ä¼˜åŒ–å°è´´å£«</div>
    </div>

    <!-- å¡ç‰‡6ï¼šæ€»ç»“ -->
    <div class="card lined-bg" id="card6">
        <div class="title-box">
            <h2 class="main-title">MySQLå­˜å‚¨æœºåˆ¶æ€»ç»“</h2>
        </div>
        <div class="content">
            <div style="text-align: center; margin: 20px 0;">
                <span style="font-size: 50px;">ğŸ“Œ</span>
            </div>
            <ul class="list" style="font-size: 18px;">
                <li><span class="highlight">MySQLé»˜è®¤æ˜¯å†…å­˜+ç¡¬ç›˜æ··åˆå­˜å‚¨</span>ï¼Œå†…å­˜ç”¨äºåŠ é€Ÿï¼Œç¡¬ç›˜ç”¨äºæŒä¹…åŒ–</li>
                <li>çº¯å†…å­˜æ–¹æ¡ˆå­˜åœ¨ï¼ˆå¦‚Memoryå¼•æ“ï¼‰ï¼Œä½†<span class="highlight">ç‰ºç‰²äº†æŒä¹…æ€§</span></li>
                <li>ç”Ÿäº§ç¯å¢ƒéœ€æƒè¡¡ï¼š
                    <ul>
                        <li>è¦æ±‚é«˜æ€§èƒ½ â†’ å¢å¤§å†…å­˜ç¼“å­˜ã€ä½¿ç”¨SSD</li>
                        <li>è¦æ±‚æŒä¹…åŒ– â†’ ç¡®ä¿æ—¥å¿—å®æ—¶åˆ·ç›˜</li>
                        <li>ä¸´æ—¶æ•°æ® â†’ Memoryå¼•æ“æˆ–Redisé›†æˆ</li>
                    </ul>
                </li>
            </ul>

            <div style="text-align: center; margin-top: 20px;">
                <p>å…³æ³¨<span style="color: #FF6B6B;">@å¢¨å¢¨è¯´æŠ€æœ¯</span>è·å–æ›´å¤šå¹²è´§</p>
                <div>
                    <span class="tag">#æ•°æ®åº“</span>
                    <span class="tag">#MySQL</span>
                    <span class="tag">#æ€§èƒ½ä¼˜åŒ–</span>
                </div>
            </div>
        </div>
        <div class="footer">å¢¨å¢¨è¯´ Â· ä¸‹æœŸé¢„å‘Šï¼šç´¢å¼•ä¼˜åŒ–æŠ€å·§</div>
    </div>
</div>

<div style="text-align: center; margin-top: 20px;">
    <button class="download-all" onclick="downloadAll()">ä¸€é”®ä¸‹è½½æ‰€æœ‰å›¾ç‰‡</button>
</div>

<script>
    // ä¸ºæ¯å¼ å¡ç‰‡åˆ›å»ºä¸‹è½½æŒ‰é’®
    const cards = document.querySelectorAll('.card');
    cards.forEach((card, index) => {
        const btnContainer = document.createElement('div');
        btnContainer.style.textAlign = 'center';
        btnContainer.style.marginTop = '10px';

        const btn = document.createElement('button');
        btn.className = 'download-btn';
        btn.textContent = `ä¸‹è½½å¡ç‰‡ ${index + 1}`;
        btn.onclick = () => downloadCard(card.id);

        btnContainer.appendChild(btn);
        card.parentNode.insertBefore(btnContainer, card.nextSibling);
    });

    // ä¸‹è½½å•å¼ å¡ç‰‡
    function downloadCard(cardId) {
        const node = document.getElementById(cardId);
        const timestamp = new Date().toISOString().replace(/[:.]/g, '-');

        domtoimage.toPng(node, {
            quality: 1,
            bgcolor: '#FAF7F0',
            width: 450, // æ˜ç¡®æŒ‡å®šå®½åº¦
            height: 600 // æ˜ç¡®æŒ‡å®šé«˜åº¦
        })
            .then(function (dataUrl) {
                const link = document.createElement('a');
                link.download = `å¢¨å¢¨è¯´-MySQLå­˜å‚¨-${cardId}-${timestamp}.png`;
                link.href = dataUrl;
                link.click();
            })
            .catch(function (error) {
                console.error('ç”Ÿæˆå›¾ç‰‡å‡ºé”™:', error);
            });
    }

    // ä¸‹è½½æ‰€æœ‰å¡ç‰‡
    function downloadAll() {
        setTimeout(() => {
            const cards = document.querySelectorAll('.card');
            let delay = 0;

            cards.forEach((card, index) => {
                setTimeout(() => {
                    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
                    domtoimage.toPng(card, {
                        quality: 1,
                        bgcolor: '#FAF7F0',
                        width: 450, // æ˜ç¡®æŒ‡å®šå®½åº¦
                        height: 600 // æ˜ç¡®æŒ‡å®šé«˜åº¦
                    })
                        .then(function (dataUrl) {
                            const link = document.createElement('a');
                            link.download = `å¢¨å¢¨è¯´-MySQLå­˜å‚¨-${card.id}-${timestamp}.png`;
                            link.href = dataUrl;
                            link.click();
                        })
                        .catch(function (error) {
                            console.error('ç”Ÿæˆå›¾ç‰‡å‡ºé”™:', error);
                        });
                }, delay);

                delay += 1000; // æ¯å¼ å¡ç‰‡é—´éš”1ç§’ä¸‹è½½
            });
        }, 1000); // ç­‰å¾…1ç§’è®©æ‰€æœ‰å†…å®¹åŠ è½½å®Œæˆ
    }
</script>
</body>
</html>